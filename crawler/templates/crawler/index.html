<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, instal-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
    <style type="text/css">*,*:*{margin: 0;padding: 0;}</style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>

    <title>Web Crawler</title>
</head>
<body>
  <header id="header" class="header">
    <div class="header-inner">
      <div class="w-100 header-top">
        <div class="auth-block">
          <div class="auth-inner-block text-light">
            {% if request.user.is_authenticated %}
              <p>{{ user.username }}</p>
              {{ link_is_ready }}
            {% else %}
              <p>Войти</p>
            {% endif %}
          </div>
          {% if request.user.is_authenticated %}
            <div class='auth-profile-block dropdown-content my-rounded'>
              <a href="{% url 'logout' %}" class='text-light' title="">Выйти</a>
            </div>  
          {% else %}

            <div class="auth-login-block dropdown-content">
                <div class="auth-login-inner-block">
                  <form class="auth-login-form" method="POST" action="{% url 'login'%}">
                    {% csrf_token %}
                    <div class="form-error">{{ form_login.non_field_errors }}</div>
                    {% for f in form_login %}
                      <label for="{{ f.id_for_label}}" class="form-label">{{ f.label }}</label>
                      <p>{{f}}</p>
                      <div class="form-error">{{ f.errors }}</div>
                    {% endfor %}
                    <div class="d-flex justify-content-around" >
                      <input type="submit" value='Войти'>
                      <a type="" id='register-button' href="{% url 'register' %}"class="text-decoration-underline ">Регистрация</a>
                    </div>
                    
                  </form>
                </div>
            </div>
              {% if form_login %}
                <script type="text/javascript">
                  $('.auth-login-block').css('display','block');
                </script>
              {% endif %}
            {% if form_register%}
              <div class="auth-register-block dropdown-content">
                  <div class="auth-register-inner-block">
                    <form class="auth-register-form" method="POST" action="{% url 'register'%}">
                      {% csrf_token %}
                      <div class="form-error">{{ form_register.non_field_errors }}</div>
                      {% for f in form_register %}
                        <label for="{{ f.id_for_label}}" class="form-label">{{ f.label }}</label>
                        <p>{{f}}</p>
                        <div class="form-error">{{ f.errors }}</div>
                      {% endfor %}
                      <div class="d-flex justify-content-around" >
                        <input type="submit" value='Зарегестрироваться'>
                      </div>
                      
                    </form>
                  </div>
              </div>
              <script type="text/javascript">
                $('.auth-register-block').css('display','block');
                $('.auth-login-block').css('display','none');
              </script>
            {% endif %}
          {% endif %}
        </div>
      </div>
      <div id="topDisplay">
        <h2 class="fw-bold">WEB CRAWLER FOR KAZAKH AND CHINESE LANGUAGE</h2>
      </div>
    </div>
  </header><!-- /header -->
  <section class="main">
    <div class="request-error-block" style="">
      <div class="request-error-block-inner alert alert-danger text-center" role="alert">
        Here is error located
      </div>
    </div>
    <div class="request-success-block" style="">
      <div class="request-success-block-inner alert alert-success text-center" role="alert">
        Here is error located
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
         <form id='searchForm' class="simple-send" action="/search/" method="post">
            {% csrf_token %}
            <div class="form-error">
              {{ form_search.non_field_errors }}
            </div>
            <p class='simpleText radioName'>Website url:</p>
            <div id='url-block' class="my-rounded" >
              {{ form_search.url }}
            </div>
            <div class="additional-form-block">
              <div  class="additional-input-block" >
                <p class="additional-input-link link-primary text-decoration-underline">Подробности</p>
              </div>
              <div class="additional-content-block dropdown-content my-rounded">
                <p>
                    <label for="{{ form_search.article_news_block.id_for_label}}" class="form-label">{{ form_search.article_news_block.label }}
                    </label>{{form_search.article_news_block}}
                </p>
                <div class="form-error">{{ form_search.article_news_block.errors }}</div>
                <p>
                    <label for="{{ form_search.article_news_title.id_for_label}}" class="form-label">{{ form_search.article_news_title.label }}
                    </label>{{form_search.article_news_title}}
                </p>
                <div class="form-error">{{ form_search.article_news_title.errors }}</div>
                <p>
                    <label for="{{ form_search.article_news_body.id_for_label}}" class="form-label">{{ form_search.article_news_body.label }}
                    </label>{{form_search.article_news_body}}
                </p>
                <div class="form-error">{{ form_search.article_news_body.errors }}</div>
              </div>
            </div>
            <div class='d-flex justify-content-between searchForm-inner-block'>
              <input id='startCrawling' type="send" class="btn shadow-sm my-rounded myButton" value='start crawling >>'>
              <input id='urlsList' type="send" class="btn shadow-sm my-rounded myButton" value='Urls list'>
            </div>
          </form>
        </div>
        <div class="col-lg-6">
          <form action="{% url 'download' %}" method="POST" id='downloadForm' class="simple-send">
            {% csrf_token %}
            <div class="text-center"> 
              <div class="row ">
                
                <div class="col-lg-6">
                  <legend class="simpleText radioName text-center">{{ form_download.file_number.label }}</legend>

                  {% for f in form_download.file_number %}
                  
                    <div class="form-check">
                      
                     <!--  <input class="form-check-input" type="radio" name="pageNumber" id="pageNumber1"> -->
                      {{f.tag}}
                      <label class="form-check-label" for="{{f.id_for_label}}">
                        <p class="simpleText">{{ f.choice_label }}</p>
                      </label>
                    </div>
                  {% endfor %}
                </div>
                <div class="col-lg-6">
                  <legend class="simpleText radioName text-center">{{ form_download.file_type.label }}</legend>

                  {% for f in form_download.file_type %}
                  
                    <div class="form-check">
                      
                     <!--  <input class="form-check-input" type="radio" name="pageNumber" id="pageNumber1"> -->
                      {{f.tag}}
                      <label class="form-check-label" for="{{f.id_for_label}}">
                        <p class="simpleText">{{ f.choice_label }}</p>
                      </label>
                    </div>
                  {% endfor %}
                </div>
              </div>
              <div id='downloadForm-submit-block'>
                <input id ='myDownloadButton' type="send" class=" btn my-rounded myButton" value='Download'>
                <input type="submit" name="" style="display:none;">
              </div>
              
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</body>
</html>
<script type="text/javascript">
  const search = "{% url 'search' %}";
  const download = "{% url 'download' %}";
  const register = "{% url 'register' %}";
</script>